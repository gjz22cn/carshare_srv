<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<script type="text/javascript" src="js/jquery.1.9.1.js"></script>
		<script type="text/javascript" src="js/jquery-form.js" ></script>
		<script type="text/javascript" src="js/jquery.validate.min.js"></script>
        <link rel="stylesheet" href="css/all.css "/>
		<link rel="stylesheet" href="css/addDevice.css" />
		<title fileNam="debug">API调试</title>
	</head>
	<body>
		<!--记录数据-->
		<div id="fileName" fileNam="debug"></div>
		<!--记录数据-->
		<div class="pluginContainer">
			<div class="pluginTitle">API调试</div>
            <form id="debug" name="debug" action="">
                <span class="nameSpan">方法</span><select class="inputDesc" id="method" ><option value="GET">GET</option>
                    <option value="POST">POST</option>
                </select>
                <span class="nameSpan">路径</span><input class="inputDesc" type="text" id="path"></input>
                <span class="nameSpan">参数</span><textarea class="inputDesc" type="text" id="param" style="height: 160px;"></textarea>
                <span class="nameSpan">结果</span><textarea class="inputDesc"  id="result" style="height: 200px;"></textarea>
            </form>
            <input class="inputSubmit" type="button" onclick="debugSubmit()" value="提交"></input>
            <div style="height: 1px;"></div>
		</div>
	</body>
	<script type="text/javascript">
        function ajaxRequest(method, url, data, callback) {
            //创建XMLHttpRequest对象
            var xmlHttp = new XMLHttpRequest();

            //配置XMLHttpRequest对象
            xmlHttp.open(method, url);

            //设置回调函数
            xmlHttp.onreadystatechange = function () {
                if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
                    callback(xmlHttp.responseText);
                }
            }

            if (data != null) {
                xmlHttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            }

            //发送请求
            xmlHttp.send(data);
        }

        function showResult(response) {
            document.getElementById("result").value=response;
        }

        function debugSubmit() {
            var methodSelect = document.getElementById("method");
            var method = methodSelect.options[methodSelect.selectedIndex].value;
            var path = document.getElementById("path").value;
            var url = "http://"+window.location.host + path;
            
            if (method == "GET") {
                ajaxRequest(method, url, null, showResult);
            } else {
                var data = document.getElementById("param").value;
                ajaxRequest(method, url, data, showResult);
            }
        }
    </script>
</html>
